!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("vega-time"),require("vega-util")):"function"==typeof define&&define.amd?define(["exports","vega-time","vega-util"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).vega={},t.vega,t.vega)}(this,(function(t,e,n){"use strict";function r(t){const e={};return n=>e[n]||(e[n]=t(n))}var u=Math.sqrt(50),i=Math.sqrt(10),o=Math.sqrt(2);function a(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function c(t){return(t=a(Math.abs(t)))?t[1]:NaN}var f,l=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function s(t){if(!(e=l.exec(t)))throw new Error("invalid format: "+t);var e;return new g({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function g(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function h(t,e){var n=a(t,e);if(!n)return t+"";var r=n[0],u=n[1];return u<0?"0."+new Array(-u).join("0")+r:r.length>u+1?r.slice(0,u+1)+"."+r.slice(u+1):r+new Array(u-r.length+2).join("0")}s.prototype=g.prototype,g.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var m={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>h(100*t,e),r:h,s:function(t,e){var n=a(t,e);if(!n)return t+"";var r=n[0],u=n[1],i=u-(f=3*Math.max(-8,Math.min(8,Math.floor(u/3))))+1,o=r.length;return i===o?r:i>o?r+new Array(i-o+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+a(t,Math.max(0,e+i-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function v(t){return t}var d,M,y,p=Array.prototype.map,T=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function D(t){var e,n,r=void 0===t.grouping||void 0===t.thousands?v:(e=p.call(t.grouping,Number),n=t.thousands+"",function(t,r){for(var u=t.length,i=[],o=0,a=e[0],c=0;u>0&&a>0&&(c+a+1>r&&(a=Math.max(1,r-c)),i.push(t.substring(u-=a,u+a)),!((c+=a+1)>r));)a=e[o=(o+1)%e.length];return i.reverse().join(n)}),u=void 0===t.currency?"":t.currency[0]+"",i=void 0===t.currency?"":t.currency[1]+"",o=void 0===t.decimal?".":t.decimal+"",a=void 0===t.numerals?v:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(p.call(t.numerals,String)),l=void 0===t.percent?"%":t.percent+"",g=void 0===t.minus?"−":t.minus+"",h=void 0===t.nan?"NaN":t.nan+"";function d(t){var e=(t=s(t)).fill,n=t.align,c=t.sign,v=t.symbol,d=t.zero,M=t.width,y=t.comma,p=t.precision,D=t.trim,C=t.type;"n"===C?(y=!0,C="g"):m[C]||(void 0===p&&(p=12),D=!0,C="g"),(d||"0"===e&&"="===n)&&(d=!0,e="0",n="=");var x="$"===v?u:"#"===v&&/[boxX]/.test(C)?"0"+C.toLowerCase():"",U="$"===v?i:/[%p]/.test(C)?l:"",w=m[C],F=/[defgprs%]/.test(C);function b(t){var u,i,l,s=x,m=U;if("c"===C)m=w(t)+m,t="";else{var v=(t=+t)<0||1/t<0;if(t=isNaN(t)?h:w(Math.abs(t),p),D&&(t=function(t){t:for(var e,n=t.length,r=1,u=-1;r<n;++r)switch(t[r]){case".":u=e=r;break;case"0":0===u&&(u=r),e=r;break;default:if(!+t[r])break t;u>0&&(u=0)}return u>0?t.slice(0,u)+t.slice(e+1):t}(t)),v&&0==+t&&"+"!==c&&(v=!1),s=(v?"("===c?c:g:"-"===c||"("===c?"":c)+s,m=("s"===C?T[8+f/3]:"")+m+(v&&"("===c?")":""),F)for(u=-1,i=t.length;++u<i;)if(48>(l=t.charCodeAt(u))||l>57){m=(46===l?o+t.slice(u+1):t.slice(u))+m,t=t.slice(0,u);break}}y&&!d&&(t=r(t,1/0));var b=s.length+t.length+m.length,S=b<M?new Array(M-b+1).join(e):"";switch(y&&d&&(t=r(S+t,S.length?M-m.length:1/0),S=""),n){case"<":t=s+t+m+S;break;case"=":t=s+S+t+m;break;case"^":t=S.slice(0,b=S.length>>1)+s+t+m+S.slice(b);break;default:t=S+s+t+m}return a(t)}return p=void 0===p?6:/[gprs]/.test(C)?Math.max(1,Math.min(21,p)):Math.max(0,Math.min(20,p)),b.toString=function(){return t+""},b}return{format:d,formatPrefix:function(t,e){var n=d(((t=s(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(c(e)/3))),u=Math.pow(10,-r),i=T[8+r/3];return function(t){return n(u*t)+i}}}}function C(t){const e=r(t.format),n=t.formatPrefix;return{format:e,formatPrefix:n,formatFloat(t){const n=s(t||",");if(null==n.precision){switch(n.precision=12,n.type){case"%":n.precision-=2;break;case"e":n.precision-=1}return r=e(n),u=e(".1f")(1)[1],t=>{const e=r(t),n=e.indexOf(u);if(n<0)return e;let i=function(t,e){let n,r=t.lastIndexOf("e");if(r>0)return r;for(r=t.length;--r>e;)if(n=t.charCodeAt(r),n>=48&&n<=57)return r+1}(e,n);const o=i<e.length?e.slice(i):"";for(;--i>n;)if("0"!==e[i]){++i;break}return e.slice(0,i)+o}}return e(n);var r,u},formatSpan(t,r,a,f){f=s(null==f?",f":f);const l=function(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),a=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),c=r/a;return c>=u?a*=10:c>=i?a*=5:c>=o&&(a*=2),e<t?-a:a}(t,r,a),g=Math.max(Math.abs(t),Math.abs(r));let h;if(null==f.precision)switch(f.type){case"s":return isNaN(h=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(c(e)/3)))-c(Math.abs(t)))}(l,g))||(f.precision=h),n(f,g);case"":case"e":case"g":case"p":case"r":isNaN(h=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,c(e)-c(t))+1}(l,g))||(f.precision=h-("e"===f.type));break;case"f":case"%":isNaN(h=function(t){return Math.max(0,-c(Math.abs(t)))}(l))||(f.precision=h-2*("%"===f.type))}return e(f)}}}let x;function U(){return x=C({format:M,formatPrefix:y})}function w(t){return C(D(t))}function F(t){return arguments.length?x=w(t):x}d=D({thousands:",",grouping:[3],currency:["$",""]}),M=d.format,y=d.formatPrefix,U();var b=new Date,S=new Date;function Y(t,e,n,r){function u(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return u.floor=function(e){return t(e=new Date(+e)),e},u.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},u.round=function(t){var e=u(t),n=u.ceil(t);return t-e<n-t?e:n},u.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},u.range=function(n,r,i){var o,a=[];if(n=u.ceil(n),i=null==i?1:Math.floor(i),!(n<r&&i>0))return a;do{a.push(o=new Date(+n)),e(n,i),t(n)}while(o<n&&n<r);return a},u.filter=function(n){return Y((function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),(function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););}))},n&&(u.count=function(e,r){return b.setTime(+e),S.setTime(+r),t(b),t(S),Math.floor(n(b,S))},u.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?u.filter(r?function(e){return r(e)%t==0}:function(e){return u.count(0,e)%t==0}):u:null}),u}const L=6e4,A=864e5,H=6048e5;var N=Y((t=>t.setHours(0,0,0,0)),((t,e)=>t.setDate(t.getDate()+e)),((t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*L)/A),(t=>t.getDate()-1));function E(t){return Y((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+7*e)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*L)/H}))}var O=E(0),j=E(1);E(2),E(3);var P=E(4);E(5),E(6);var I=Y((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));I.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Y((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,n){e.setFullYear(e.getFullYear()+n*t)})):null};var z=I,Z=Y((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/A}),(function(t){return t.getUTCDate()-1}));function W(t){return Y((function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+7*e)}),(function(t,e){return(e-t)/H}))}var k=W(0),q=W(1);W(2),W(3);var R=W(4);W(5),W(6);var V=Y((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()}));V.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Y((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null};var Q=V;function X(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function $(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function J(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function B(t){var e=t.dateTime,n=t.date,r=t.time,u=t.periods,i=t.days,o=t.shortDays,a=t.months,c=t.shortMonths,f=ct(u),l=ft(u),s=ct(i),g=ft(i),h=ct(o),m=ft(o),v=ct(a),d=ft(a),M=ct(c),y=ft(c),p={a:function(t){return o[t.getDay()]},A:function(t){return i[t.getDay()]},b:function(t){return c[t.getMonth()]},B:function(t){return a[t.getMonth()]},c:null,d:Lt,e:Lt,f:Ot,g:Qt,G:$t,H:At,I:Ht,j:Nt,L:Et,m:jt,M:Pt,p:function(t){return u[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:Me,s:ye,S:It,u:zt,U:Zt,V:kt,w:qt,W:Rt,x:null,X:null,y:Vt,Y:Xt,Z:Jt,"%":de},T={a:function(t){return o[t.getUTCDay()]},A:function(t){return i[t.getUTCDay()]},b:function(t){return c[t.getUTCMonth()]},B:function(t){return a[t.getUTCMonth()]},c:null,d:Bt,e:Bt,f:ee,g:ge,G:me,H:Gt,I:_t,j:Kt,L:te,m:ne,M:re,p:function(t){return u[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:Me,s:ye,S:ue,u:ie,U:oe,V:ce,w:fe,W:le,x:null,X:null,y:se,Y:he,Z:ve,"%":de},D={a:function(t,e,n){var r=h.exec(e.slice(n));return r?(t.w=m.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(t,e,n){var r=s.exec(e.slice(n));return r?(t.w=g.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(t,e,n){var r=M.exec(e.slice(n));return r?(t.m=y.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(t,e,n){var r=v.exec(e.slice(n));return r?(t.m=d.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(t,n,r){return U(t,e,n,r)},d:Tt,e:Tt,f:Ft,g:dt,G:vt,H:Ct,I:Ct,j:Dt,L:wt,m:pt,M:xt,p:function(t,e,n){var r=f.exec(e.slice(n));return r?(t.p=l.get(r[0].toLowerCase()),n+r[0].length):-1},q:yt,Q:St,s:Yt,S:Ut,u:st,U:gt,V:ht,w:lt,W:mt,x:function(t,e,r){return U(t,n,e,r)},X:function(t,e,n){return U(t,r,e,n)},y:dt,Y:vt,Z:Mt,"%":bt};function C(t,e){return function(n){var r,u,i,o=[],a=-1,c=0,f=t.length;for(n instanceof Date||(n=new Date(+n));++a<f;)37===t.charCodeAt(a)&&(o.push(t.slice(c,a)),null!=(u=nt[r=t.charAt(++a)])?r=t.charAt(++a):u="e"===r?" ":"0",(i=e[r])&&(r=i(n,u)),o.push(r),c=a+1);return o.push(t.slice(c,a)),o.join("")}}function x(t,e){return function(n){var r,u,i=J(1900,void 0,1);if(U(i,t,n+="",0)!=n.length)return null;if("Q"in i)return new Date(i.Q);if("s"in i)return new Date(1e3*i.s+("L"in i?i.L:0));if(e&&!("Z"in i)&&(i.Z=0),"p"in i&&(i.H=i.H%12+12*i.p),void 0===i.m&&(i.m="q"in i?i.q:0),"V"in i){if(i.V<1||i.V>53)return null;"w"in i||(i.w=1),"Z"in i?(u=(r=$(J(i.y,0,1))).getUTCDay(),r=u>4||0===u?q.ceil(r):q(r),r=Z.offset(r,7*(i.V-1)),i.y=r.getUTCFullYear(),i.m=r.getUTCMonth(),i.d=r.getUTCDate()+(i.w+6)%7):(u=(r=X(J(i.y,0,1))).getDay(),r=u>4||0===u?j.ceil(r):j(r),r=N.offset(r,7*(i.V-1)),i.y=r.getFullYear(),i.m=r.getMonth(),i.d=r.getDate()+(i.w+6)%7)}else("W"in i||"U"in i)&&("w"in i||(i.w="u"in i?i.u%7:"W"in i?1:0),u="Z"in i?$(J(i.y,0,1)).getUTCDay():X(J(i.y,0,1)).getDay(),i.m=0,i.d="W"in i?(i.w+6)%7+7*i.W-(u+5)%7:i.w+7*i.U-(u+6)%7);return"Z"in i?(i.H+=i.Z/100|0,i.M+=i.Z%100,$(i)):X(i)}}function U(t,e,n,r){for(var u,i,o=0,a=e.length,c=n.length;o<a;){if(r>=c)return-1;if(37===(u=e.charCodeAt(o++))){if(u=e.charAt(o++),!(i=D[u in nt?e.charAt(o++):u])||(r=i(t,n,r))<0)return-1}else if(u!=n.charCodeAt(r++))return-1}return r}return p.x=C(n,p),p.X=C(r,p),p.c=C(e,p),T.x=C(n,T),T.X=C(r,T),T.c=C(e,T),{format:function(t){var e=C(t+="",p);return e.toString=function(){return t},e},parse:function(t){var e=x(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=C(t+="",T);return e.toString=function(){return t},e},utcParse:function(t){var e=x(t+="",!0);return e.toString=function(){return t},e}}}var G,_,K,tt,et,nt={"-":"",_:" ",0:"0"},rt=/^\s*\d+/,ut=/^%/,it=/[\\^$*+?|[\]().{}]/g;function ot(t,e,n){var r=t<0?"-":"",u=(r?-t:t)+"",i=u.length;return r+(i<n?new Array(n-i+1).join(e)+u:u)}function at(t){return t.replace(it,"\\$&")}function ct(t){return new RegExp("^(?:"+t.map(at).join("|")+")","i")}function ft(t){return new Map(t.map(((t,e)=>[t.toLowerCase(),e])))}function lt(t,e,n){var r=rt.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function st(t,e,n){var r=rt.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function gt(t,e,n){var r=rt.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function ht(t,e,n){var r=rt.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function mt(t,e,n){var r=rt.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function vt(t,e,n){var r=rt.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function dt(t,e,n){var r=rt.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Mt(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function yt(t,e,n){var r=rt.exec(e.slice(n,n+1));return r?(t.q=3*r[0]-3,n+r[0].length):-1}function pt(t,e,n){var r=rt.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function Tt(t,e,n){var r=rt.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Dt(t,e,n){var r=rt.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function Ct(t,e,n){var r=rt.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function xt(t,e,n){var r=rt.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Ut(t,e,n){var r=rt.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function wt(t,e,n){var r=rt.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Ft(t,e,n){var r=rt.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function bt(t,e,n){var r=ut.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function St(t,e,n){var r=rt.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Yt(t,e,n){var r=rt.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function Lt(t,e){return ot(t.getDate(),e,2)}function At(t,e){return ot(t.getHours(),e,2)}function Ht(t,e){return ot(t.getHours()%12||12,e,2)}function Nt(t,e){return ot(1+N.count(z(t),t),e,3)}function Et(t,e){return ot(t.getMilliseconds(),e,3)}function Ot(t,e){return Et(t,e)+"000"}function jt(t,e){return ot(t.getMonth()+1,e,2)}function Pt(t,e){return ot(t.getMinutes(),e,2)}function It(t,e){return ot(t.getSeconds(),e,2)}function zt(t){var e=t.getDay();return 0===e?7:e}function Zt(t,e){return ot(O.count(z(t)-1,t),e,2)}function Wt(t){var e=t.getDay();return e>=4||0===e?P(t):P.ceil(t)}function kt(t,e){return t=Wt(t),ot(P.count(z(t),t)+(4===z(t).getDay()),e,2)}function qt(t){return t.getDay()}function Rt(t,e){return ot(j.count(z(t)-1,t),e,2)}function Vt(t,e){return ot(t.getFullYear()%100,e,2)}function Qt(t,e){return ot((t=Wt(t)).getFullYear()%100,e,2)}function Xt(t,e){return ot(t.getFullYear()%1e4,e,4)}function $t(t,e){var n=t.getDay();return ot((t=n>=4||0===n?P(t):P.ceil(t)).getFullYear()%1e4,e,4)}function Jt(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+ot(e/60|0,"0",2)+ot(e%60,"0",2)}function Bt(t,e){return ot(t.getUTCDate(),e,2)}function Gt(t,e){return ot(t.getUTCHours(),e,2)}function _t(t,e){return ot(t.getUTCHours()%12||12,e,2)}function Kt(t,e){return ot(1+Z.count(Q(t),t),e,3)}function te(t,e){return ot(t.getUTCMilliseconds(),e,3)}function ee(t,e){return te(t,e)+"000"}function ne(t,e){return ot(t.getUTCMonth()+1,e,2)}function re(t,e){return ot(t.getUTCMinutes(),e,2)}function ue(t,e){return ot(t.getUTCSeconds(),e,2)}function ie(t){var e=t.getUTCDay();return 0===e?7:e}function oe(t,e){return ot(k.count(Q(t)-1,t),e,2)}function ae(t){var e=t.getUTCDay();return e>=4||0===e?R(t):R.ceil(t)}function ce(t,e){return t=ae(t),ot(R.count(Q(t),t)+(4===Q(t).getUTCDay()),e,2)}function fe(t){return t.getUTCDay()}function le(t,e){return ot(q.count(Q(t)-1,t),e,2)}function se(t,e){return ot(t.getUTCFullYear()%100,e,2)}function ge(t,e){return ot((t=ae(t)).getUTCFullYear()%100,e,2)}function he(t,e){return ot(t.getUTCFullYear()%1e4,e,4)}function me(t,e){var n=t.getUTCDay();return ot((t=n>=4||0===n?R(t):R.ceil(t)).getUTCFullYear()%1e4,e,4)}function ve(){return"+0000"}function de(){return"%"}function Me(t){return+t}function ye(t){return Math.floor(+t/1e3)}function pe(t,r,u){u=u||{},n.isObject(u)||n.error("Invalid time multi-format specifier: ".concat(u));const i=r(e.SECONDS),o=r(e.MINUTES),a=r(e.HOURS),c=r(e.DATE),f=r(e.WEEK),l=r(e.MONTH),s=r(e.QUARTER),g=r(e.YEAR),h=t(u[e.MILLISECONDS]||".%L"),m=t(u[e.SECONDS]||":%S"),v=t(u[e.MINUTES]||"%I:%M"),d=t(u[e.HOURS]||"%I %p"),M=t(u[e.DATE]||u[e.DAY]||"%a %d"),y=t(u[e.WEEK]||"%b %d"),p=t(u[e.MONTH]||"%B"),T=t(u[e.QUARTER]||"%B"),D=t(u[e.YEAR]||"%Y");return t=>(i(t)<t?h:o(t)<t?m:a(t)<t?v:c(t)<t?d:l(t)<t?f(t)<t?M:y:g(t)<t?s(t)<t?p:T:D)(t)}function Te(t){const u=r(t.format),i=r(t.utcFormat);return{timeFormat:t=>n.isString(t)?u(t):pe(u,e.timeInterval,t),utcFormat:t=>n.isString(t)?i(t):pe(i,e.utcInterval,t),timeParse:r(t.parse),utcParse:r(t.utcParse)}}let De;function Ce(){return De=Te({format:_,parse:K,utcFormat:tt,utcParse:et})}function xe(t){return Te(B(t))}function Ue(t){return arguments.length?De=xe(t):De}!function(t){G=B(t),_=G.format,K=G.parse,tt=G.utcFormat,et=G.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),Ce();const we=(t,e)=>n.extend({},t,e);function Fe(t,e){const r=arguments.length;return r&&2!==r&&n.error("defaultLocale expects either zero or two arguments."),r?we(F(t),Ue(e)):we(F(),Ue())}t.defaultLocale=Fe,t.locale=function(t,e){const n=t?w(t):F(),r=e?xe(e):Ue();return we(n,r)},t.numberFormatDefaultLocale=F,t.numberFormatLocale=w,t.resetDefaultLocale=function(){return U(),Ce(),Fe()},t.resetNumberFormatDefaultLocale=U,t.resetTimeFormatDefaultLocale=Ce,t.timeFormatDefaultLocale=Ue,t.timeFormatLocale=xe,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=vega-format.min.js.map
